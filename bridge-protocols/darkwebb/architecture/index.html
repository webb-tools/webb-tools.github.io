
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://docs.webb.tools/bridge-protocols/darkwebb/architecture/">
      
      <link rel="icon" href="../../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.6">
    
    
      
        <title>Architecture - Webb Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.802231af.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="blue">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#main-contracts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Webb Docs" class="md-header__button md-logo" aria-label="Webb Docs" data-md-component="logo">
      
  <img src="../../../img/webb-icon.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Webb Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Architecture
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Webb Docs" class="md-nav__button md-logo" aria-label="Webb Docs" data-md-component="logo">
      
  <img src="../../../img/webb-icon.svg" alt="logo">

    </a>
    Webb Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      <label class="md-nav__link" for="__nav_2">
        Bridge protocols
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Bridge protocols" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Bridge protocols
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" checked>
      
      <label class="md-nav__link" for="__nav_2_1">
        darkwebb Protocol
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="darkwebb Protocol" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          darkwebb Protocol
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Architecture
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Architecture
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#main-contracts" class="md-nav__link">
    Main Contracts
  </a>
  
    <nav class="md-nav" aria-label="Main Contracts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linkableanchor" class="md-nav__link">
    LinkableAnchor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bridge" class="md-nav__link">
    Bridge
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anchorhandler" class="md-nav__link">
    AnchorHandler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#erc20handler" class="md-nav__link">
    ERC20Handler
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#definitions" class="md-nav__link">
    Definitions
  </a>
  
    <nav class="md-nav" aria-label="Definitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commitment" class="md-nav__link">
    commitment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neighborroots" class="md-nav__link">
    neighborRoots
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resourceid" class="md-nav__link">
    resourceID
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../governance/" class="md-nav__link">
        Governance
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_4" type="checkbox" id="__nav_2_1_4" >
      
      <label class="md-nav__link" for="__nav_2_1_4">
        Implementations
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Implementations" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_4">
          <span class="md-nav__icon md-icon"></span>
          Implementations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_4_1" type="checkbox" id="__nav_2_1_4_1" >
      
      <label class="md-nav__link" for="__nav_2_1_4_1">
        Solidity
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Solidity" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_1_4_1">
          <span class="md-nav__icon md-icon"></span>
          Solidity
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_4_1_2" type="checkbox" id="__nav_2_1_4_1_2" >
      
      <label class="md-nav__link" for="__nav_2_1_4_1_2">
        Contracts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Contracts" data-md-level="5">
        <label class="md-nav__title" for="__nav_2_1_4_1_2">
          <span class="md-nav__icon md-icon"></span>
          Contracts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/Anchor2/" class="md-nav__link">
        Anchor2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/AnchorBase2/" class="md-nav__link">
        AnchorBase2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/LinkableAnchor2/" class="md-nav__link">
        LinkableAnchor2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/WEBBAnchor2/" class="md-nav__link">
        WEBBAnchor2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/MerkleTreeWithHistoryPoseidon/" class="md-nav__link">
        MerkleTreeWithHistoryPoseidon
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/Bridge.md" class="md-nav__link">
        Bridge
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_4_2" type="checkbox" id="__nav_2_1_4_2" >
      
      <label class="md-nav__link" for="__nav_2_1_4_2">
        Substrate
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Substrate" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_1_4_2">
          <span class="md-nav__icon md-icon"></span>
          Substrate
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../pallets/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../pallets/overview/" class="md-nav__link">
        Pallets
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployments/" class="md-nav__link">
        Deployments
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Mixer protocols
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Mixer protocols" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Mixer protocols
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      <label class="md-nav__link" for="__nav_3_1">
        Tornado Core (webb version)
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Tornado Core (webb version)" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Tornado Core (webb version)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../mixer-protocols/tornado/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../mixer-protocols/tornado/deployments/" class="md-nav__link">
        Deployments
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_3" type="checkbox" id="__nav_3_1_3" >
      
      <label class="md-nav__link" for="__nav_3_1_3">
        Contracts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Contracts" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_3">
          <span class="md-nav__icon md-icon"></span>
          Contracts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../mixer-protocols/tornado/contracts/Anchor/" class="md-nav__link">
        Anchor
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../mixer-protocols/tornado/contracts/IHasher/" class="md-nav__link">
        IHasher
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../mixer-protocols/tornado/contracts/IVerifier/" class="md-nav__link">
        IVerifier
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../mixer-protocols/tornado/contracts/MerkleTreeWithHistory/" class="md-nav__link">
        MerkleTreeWithHistory
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../mixer-protocols/tornado/contracts/NativeAnchor/" class="md-nav__link">
        NativeAnchor
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Relayer
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Relayer" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Relayer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../relayer/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../relayer/setup/" class="md-nav__link">
        Setup
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../relayer/http-endpoints/" class="md-nav__link">
        Http Endpoints
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../relayer/websockets/" class="md-nav__link">
        WebSockets
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../repos/overview/" class="md-nav__link">
        Organisation Repos
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#main-contracts" class="md-nav__link">
    Main Contracts
  </a>
  
    <nav class="md-nav" aria-label="Main Contracts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linkableanchor" class="md-nav__link">
    LinkableAnchor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bridge" class="md-nav__link">
    Bridge
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anchorhandler" class="md-nav__link">
    AnchorHandler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#erc20handler" class="md-nav__link">
    ERC20Handler
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#definitions" class="md-nav__link">
    Definitions
  </a>
  
    <nav class="md-nav" aria-label="Definitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commitment" class="md-nav__link">
    commitment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neighborroots" class="md-nav__link">
    neighborRoots
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resourceid" class="md-nav__link">
    resourceID
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Architecture</h1>
                
                <p>The darkwebb protocol combines standard bridging architectures with Anchor-based anonymous transactions, enabling privacy for both native and cross-chain movement of assets. </p>
<h2 id="main-contracts">Main Contracts<a class="headerlink" href="#main-contracts" title="Permanent link">&para;</a></h2>
<p>Example diagram of the architecture and governance of cross chain private bridging of WEBB tokens:</p>
<hr />
<p><img alt="Architecture" src="/img/architecture.png" /></p>
<h3 id="linkableanchor">LinkableAnchor<a class="headerlink" href="#linkableanchor" title="Permanent link">&para;</a></h3>
<p><code>LinkableAnchor</code>'s enable privacy through anonymity sets in a similar manner to <a href="https://tornado.cash/">Tornado Cash</a>. Users generate a commitment hash upon deposit into an anchor for a particular webb token. The commitment hash contains the chainID they wish to withdraw on. This commitment is added to the anchor's merkle tree and the new root is added to all connected anchors by the system's relayers. The relayers connect anchors by tracking deposits and voting on merkle root updates. The votes are submitted to the bridges of all possible destinations supported by the deposited anchor. Once the vote passes on a connected bridge, the bridge calls its <code>AnchorHandler</code> which then updates the <code>neighborRoots</code> of the connected anchor. The <code>LinkableAnchor</code>'s <code>neighborRoots</code> mapping stores the latest roots of the anchors it is connected with, allowing the user to prove using zero-knowledge that they contain a valid commitment and can therefore withdraw on the cross-chain anchor they specified upon their original deposit.</p>
<h3 id="bridge">Bridge<a class="headerlink" href="#bridge" title="Permanent link">&para;</a></h3>
<p>The <code>Bridge</code> contract allows for both fixed denomination, private bridging and standard, public bridging of assets. The private bridging functionality uses an <code>AnchorHandler</code> to track the state of connected chains while the standard bridging uses an <code>ERC20Handler</code>. The Bridge's state is is maintained by a set of relayers through voting. These relayers vote to update the latest merkle roots of connected anchors in the case of private bridging, and to distribute bridged assets in the case of public bridging.</p>
<h3 id="anchorhandler">AnchorHandler<a class="headerlink" href="#anchorhandler" title="Permanent link">&para;</a></h3>
<p>Every <code>Bridge</code> contract has a corresponding <code>AnchorHandler</code> to add or update the <code>neighborRoots</code> of the anchors on that chain after relayers pass and execute a proposals containing connected anchors' root updates. The Handler updates a specific anchor based on a mapping of a <code>resourceID</code> to a <code>LinkableAnchor</code> contract address which is set by the <code>Bridge</code> admin.</p>
<h3 id="erc20handler">ERC20Handler<a class="headerlink" href="#erc20handler" title="Permanent link">&para;</a></h3>
<p>Every <code>Bridge</code> contract has a corresponding <code>ERC20Handler</code> to keep track of deposits on a connected bridge. This allows the user to bridge tokens publicly and a fixed denomination as seen in standard bridges. See <a href="https://chainbridge.chainsafe.io/">Chainbridge's Documentation</a> for more detail on this standard bridge architecture.</p>
<h2 id="definitions">Definitions<a class="headerlink" href="#definitions" title="Permanent link">&para;</a></h2>
<h3 id="commitment">commitment<a class="headerlink" href="#commitment" title="Permanent link">&para;</a></h3>
<p>A <code>commitment</code> is generated upon a users deposit into an anchor and later used in a ZK proof for withdrawal. The commitment is the <code>PoseidonHash(DestinationChainID + nullifier + secret)</code>. DestinationChainID is a user input indicating the chain they will withdraw on. </p>
<h3 id="neighborroots">neighborRoots<a class="headerlink" href="#neighborroots" title="Permanent link">&para;</a></h3>
<p>Every <code>LinkableAnchor</code> stores its <code>neighborRoots</code>, a mapping containing the merkle roots of the anchors it is connected to. Each anchor stores a history of 30 roots, so users can verify against a historical root while new deposits occur.</p>
<h3 id="resourceid">resourceID<a class="headerlink" href="#resourceid" title="Permanent link">&para;</a></h3>
<p><code>resourceID</code>'s provide a chain agnostic identifier to connect tokens with the handlers and anchors that interact with that token. A <code>resourceID</code> for a given token and denomination is defined as the hash of that token name concatenated with its denomination. The <code>resourceID</code> for a token used in public bridging that is not tied to a denomination will simply be the hash of its token name.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../overview/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Overview" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Overview
            </div>
          </div>
        </a>
      
      
        
        <a href="../governance/" class="md-footer__link md-footer__link--next" aria-label="Next: Governance" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Governance
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.409db549.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.756773cc.min.js"></script>
      
    
  </body>
</html>